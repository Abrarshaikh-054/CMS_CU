{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Previous Academic Information</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'webapp/styles.css' %}">
    <style>
      :root{ --teal:#00897b; --orange:#ff8f00; }
      body{ background:#f8fafb; }
      .sidebar{ background:var(--teal); min-height:100vh; color:#fff; }
      .sidebar .nav-link{ color:#e6fffb; border-radius:.5rem; }
      .sidebar .nav-link.active, .sidebar .nav-link:hover{ background:rgba(255,255,255,.12); color:#fff; }
      .page-title{ color:var(--teal); }
      .card{ border:0; }
      .btn-teal{ background:var(--teal); color:#fff; border:none; }
      .btn-teal:hover{ background:#00796b; }
      .btn-orange{ background:var(--orange); color:#fff; border:none; }
      .btn-orange:hover{ background:#fb8c00; }
      .required-asterisk{ margin-left:4px; }
      .form-label .text-danger{ font-weight:700; }
    </style>
    <meta name="csrf-token" content="{{ csrf_token }}">
    <script>window.CMS = window.CMS || {}; window.CMS.urls = { savePreviousAcademic: "{% url 'admission_previous_academic_save' %}" };</script>
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <nav class="col-md-3 col-lg-2 d-md-block sidebar py-4">
        <div class="px-3">
          <div class="d-flex align-items-center mb-3">
            <img src="{% static 'images/sabour_college_logo.png' %}" alt="Logo" width="40" class="me-2">
            <div>
              <div class="fw-semibold">Student Dashboard</div>
              <small class="opacity-75">{{ student_name }}</small>
            </div>
          </div>
          <hr class="border-light opacity-25">
          <ul class="nav nav-pills flex-column gap-2">
            <li class="nav-item"><a class="nav-link" href="{% url 'admission_basic_info' %}"><i class="bi bi-person-lines-fill me-2"></i>Basic Information</a></li>
            <li class="nav-item"><a class="nav-link active" href="{% url 'admission_previous_academic' %}"><i class="bi bi-journal-text me-2"></i>Previous Academic</a></li>
            <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-journal-check me-2"></i>Proposed Subjects</a></li>
            <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-upload me-2"></i>Uploads</a></li>
            <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-cash-coin me-2"></i>Payments</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'student_logout' %}"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
          </ul>
        </div>
      </nav>

      <!-- Main -->
      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
        <nav aria-label="breadcrumb" class="mb-3">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
            <li class="breadcrumb-item">Admission</li>
            <li class="breadcrumb-item active" aria-current="page">Previous Academic</li>
          </ol>
        </nav>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h3 class="page-title">Student Admission â€“ Previous Academic Information</h3>
        </div>

        <div id="alertContainer"></div>

        <div class="card shadow-sm rounded">
          <div class="card-body p-4">
            <form id="previousAcademicForm" autocomplete="off" novalidate>
              {% csrf_token %}
              <h5 class="mb-3">10th / Secondary Education</h5>
              <div class="row g-3 mb-4">
                <div class="col-md-4">
                  <label class="form-label">Board Name <span class="text-danger required-asterisk">*</span></label>
                  {{ form.tenth_board }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">School/Institution Name <span class="text-danger required-asterisk">*</span></label>
                  {{ form.tenth_school }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Year of Passing <span class="text-danger required-asterisk">*</span></label>
                  {{ form.tenth_year }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Roll Number / Seat Number <span class="text-danger required-asterisk">*</span></label>
                  {{ form.tenth_roll }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Marks Obtained <span class="text-danger required-asterisk">*</span></label>
                  {{ form.tenth_marks_obtained }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Maximum Marks <span class="text-danger required-asterisk">*</span></label>
                  {{ form.tenth_max_marks }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Percentage</label>
                  <input type="text" name="tenth_percentage" class="form-control" readonly value="{{ form.instance.tenth_percentage|default:'' }}">
                </div>
              </div>

              <h5 class="mb-3">12th / Higher Secondary Education</h5>
              <div class="row g-3 mb-4">
                <div class="col-md-4">
                  <label class="form-label">Board Name <span class="text-danger required-asterisk">*</span></label>
                  {{ form.twelfth_board }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">School/Institution Name <span class="text-danger required-asterisk">*</span></label>
                  {{ form.twelfth_school }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Year of Passing <span class="text-danger required-asterisk">*</span></label>
                  {{ form.twelfth_year }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Roll Number / Seat Number <span class="text-danger required-asterisk">*</span></label>
                  {{ form.twelfth_roll }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Stream <span class="text-danger required-asterisk">*</span></label>
                  {{ form.twelfth_stream }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Marks Obtained <span class="text-danger required-asterisk">*</span></label>
                  {{ form.twelfth_marks_obtained }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Maximum Marks <span class="text-danger required-asterisk">*</span></label>
                  {{ form.twelfth_max_marks }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Percentage</label>
                  <input type="text" name="twelfth_percentage" class="form-control" readonly value="{{ form.instance.twelfth_percentage|default:'' }}">
                </div>
              </div>

              <h5 class="mb-3">Additional Information</h5>
              <div class="row g-3 mb-4">
                <div class="col-md-4">
                  <label class="form-label">Entrance Exam Name</label>
                  {{ form.entrance_exam_name }}
                </div>
                <div class="col-md-4">
                  <label class="form-label">Entrance Exam Roll Number</label>
                  {{ form.entrance_exam_roll }}
                </div>
                <div class="col-md-4">
                  <label class="form-label">Entrance Exam Score / Rank</label>
                  {{ form.entrance_exam_score }}
                </div>
                <div class="col-md-4">
                  <label class="form-label">Gap Year <span class="text-danger required-asterisk">*</span></label>
                  {{ form.gap_year }}
                  <div class="invalid-feedback">Required</div>
                </div>
                <div class="col-md-8 {% if form.instance.gap_year != 'Yes' %}d-none{% endif %}" id="gapYearReasonDiv">
                  <label class="form-label">If Yes, specify reason <span class="text-danger required-asterisk">*</span></label>
                  {{ form.gap_year_reason }}
                  <div class="invalid-feedback">Required if Gap Year is Yes</div>
                </div>
              </div>

              <div class="d-flex justify-content-between pt-4">
                <button type="button" id="btnSaveAcademic" class="btn btn-teal px-4"><i class="bi bi-save me-1"></i> Save</button>
                <div>
                  <a href="{% url 'admission_basic_info' %}" class="btn btn-secondary px-4"><i class="bi bi-arrow-left-short"></i> Previous</a>
                  <a href="#" class="btn btn-orange px-4 ms-2">Next <i class="bi bi-arrow-right-short"></i></a>
                </div>
              </div>
            </form>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Toast -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080">
    <div id="saveToast" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">
          Previous Academic Information Saved Successfully
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{% static 'webapp/admission_previous_academic.js' %}"></script>
</body>
</html>
